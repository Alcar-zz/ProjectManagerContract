(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1025:function(e,t){},1027:function(e,t){},1149:function(e,t){},1233:function(e,t){},1259:function(e,t){},1437:function(e,t){},1533:function(e,t){},1547:function(e,t){},1574:function(e,t,a){},1575:function(e,t,a){},1576:function(e,t,a){},1577:function(e,t,a){},1578:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(239),c=a.n(s),i=(a(629),a(25)),o=a(49),l=a(87),p=a(617),u=a(126),d=a(618),m=a(619),f=a.n(m),h={CHANGE_ACCOUNT:"CHANGE_ACCOUNT",SET_METAMASK:"SET_METAMASK"};function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var y={metamaskExist:"loading"};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.CHANGE_ACCOUNT:return{account:t.account,metamaskExist:t.metamask||"enabled"};case h.SET_METAMASK:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{metamaskExist:t.metamask});default:return e}}var j=a(124),g=a(1),E=a.n(g),O=a(32),w=a(76),P=a(148),C=a.n(P),k=a(21),N=a.n(k);document.documentElement;function A(e){var t=e.replace(/^0x/,"");return!!/^([A-Fa-f0-9]{40})$/.test(t)&&t}navigator.userAgent.indexOf("Mac");function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ids",n={},r=[];return e.forEach((function(e){n[e[t]]=e,r.push(e[t])})),n[a]=r,n}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||e&&0===e.length)return t||[];var a=Object(w.a)(e);return t.map((function(t){e.includes(t)||a.push(t)})),a}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={LOAD_PROJECTS:"LOAD_PROJECTS",ADD_PROJECT:"ADD_PROJECT",DELETE_PROJECT:"DELETE_PROJECT",FINALIZE_PROJECT:"FINALIZE_PROJECT",MOD_PARTICIPANTS_NUMBER:"MOD_PARTICIPANTS_NUMBER",MOD_FILE_HASH:"MOD_FILE_HASH",ADD_PARTICIPANTS:"ADD_PARTICIPANTS",CLAIM_PAYMENT:"CLAIM_PAYMENT"};function D(e,t){return{type:R.ADD_PROJECT,payload:e.then((function(e){return""===e.projectsData.trim()?null:{isOwner:e.isUserOwner,project:JSON.parse(e.projectsData)}})),meta:{address:t}}}function _(e,t){return{type:R.DELETE_PROJECT,payload:e,meta:{address:t}}}function F(e,t){return{type:R.FINALIZE_PROJECT,payload:e,meta:{address:t}}}function z(e,t,a,n){return function(r,s){return r(n?{type:R.MOD_PARTICIPANTS_NUMBER,payload:n.then((function(e){return M({},e,{isCurrentAccount:s().metamaskReducer.account===t})})),meta:{address:e,mod:a,participant:t}}:{type:R.MOD_PARTICIPANTS_NUMBER,address:e,mod:a,participant:t,isCurrentAccount:s().metamaskReducer.account===t})}}function I(e,t){return{type:R.MOD_FILE_HASH,address:e,fileHash:t}}function L(e,t){return{type:R.CLAIM_PAYMENT,address:e,participant:t}}function H(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={};function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,a=t.type.includes(J.success)&&t.meta?t.meta.address:t.address,n=t.type.includes(J.success)&&t.meta?t.meta.participant:t.participant;switch(t.type){case R.LOAD_PROJECTS+J.error:case R.LOAD_PROJECTS+J.start:return U({},e,{loading:t.type.includes(J.start)});case R.LOAD_PROJECTS+J.success:return U({},e,{},t.payload,{loading:!1});case R.ADD_PROJECT+J.success:var r;return!e[t.meta.address]&&t.payload?(r={},Object(i.a)(r,t.meta.address,{name:t.payload.project.name,address:t.meta.address,createdAt:t.payload.project.createdAt,participants:t.payload.project.participants,isProjectClosed:t.payload.project.isProjectClosed,vontingInProcess:t.payload.project.vontingInProcess,fileHash:t.payload.project.fileHash}),Object(i.a)(r,"isOwner",t.payload.isOwner),Object(i.a)(r,"projectsAddresses",S(e.projectsAddresses,[t.meta.address])),r):e;case R.DELETE_PROJECT+J.success:case R.DELETE_PROJECT:if(e[a]){e[a];var s=Object(j.a)(e,[a].map(H));return s.projectsAddresses=e.projectsAddresses.filter((function(e){return e!==a})),s}return e;case R.FINALIZE_PROJECT+J.success:case R.FINALIZE_PROJECT:return e[a]&&!e[a].isProjectClosed?U({},e,Object(i.a)({},a,U({},e[a],{isProjectClosed:!0}))):e;case R.MOD_PARTICIPANTS_NUMBER+J.success:case R.MOD_PARTICIPANTS_NUMBER:var c=t.type.includes(J.success)&&t.meta?t.meta.mod:t.mod,o=t.type.includes(J.success)?t.payload.isCurrentAccount:t.isCurrentAccount;if(e[a]){if(c<0){if(o){e[a];var l=Object(j.a)(e,[a].map(H));return l.projectsAddresses=e.projectsAddresses.filter((function(e){return e!==a})),l}if(e[a].participantsAddresses&&e[a].participantsAddresses.includes(n))return U({},e,Object(i.a)({},a,U({},e[a],{participantsAddresses:e[a].participantsAddresses.filter((function(e){return e!==n})),participants:e[a].participants-1})))}var p;return c>0&&(!e[a].participantsAddresses||e[a].participantsAddresses&&!e[a].participantsAddresses.includes(n))?U({},e,Object(i.a)({},a,U({},e[a],(p={},Object(i.a)(p,n,t.payload),Object(i.a)(p,"participantsAddresses",S(e[a].participantsAddresses,[n])),Object(i.a)(p,"participants",e[a].participants+1),p)))):e}return e;case R.MOD_FILE_HASH+J.success:case R.MOD_FILE_HASH:if(e[a]){var u=t.type.includes(J.success)?t.meta.fileHash:t.fileHash;return U({},e,Object(i.a)({},a,U({},e[a],{fileHash:u})))}return e;case R.ADD_PARTICIPANTS+J.success:return e[a]?U({},e,Object(i.a)({},a,U({},e[a],{},t.payload))):e;case R.CLAIM_PAYMENT+J.success:case R.CLAIM_PAYMENT:return e[a]&&e[a][n]&&!e[a][n].didClaim?U({},e,Object(i.a)({},a,U({},e[a],Object(i.a)({},n,U({},e[a][n],{didClaim:!0}))))):e;case h.CHANGE_ACCOUNT:return B;case R.ADD_PROJECT+J.error:default:return e}}var J={success:"_SUCCESS",start:"_START",error:"_ERROR"},Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;var W=a(24),q=a(30),G=a(27),K=a(23),X=a(20),$=a(26),Q=a(51),ee=a(125),te=a.n(ee),ae=(a(843),function(e){return r.a.createElement(l.b,{to:"/"},r.a.createElement("h1",null,r.a.createElement("span",{className:"title-oxoft"},"Oxoft"),r.a.createElement("span",{className:"title-manager"},"Manager")))}),ne=(a(845),function(e){function t(){return Object(W.a)(this,t),Object(G.a)(this,Object(K.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this.props.account;return r.a.createElement("header",{className:"header-container flex-space-between"},r.a.createElement(ae,null),e&&r.a.createElement("div",{className:"header-account-container flex-c-h-center"},r.a.createElement("p",null,"Current Account"),r.a.createElement("a",{href:"https://ropsten.etherscan.io/address/".concat(e),target:"_blank",rel:"noreferrer noopener"},e)))}}]),t}(r.a.Component)),re=Object(Q.g)(ne),se=Object(o.b)((function(e){return{metamaskExist:e.metamaskReducer.metamaskExist,account:e.metamaskReducer.account}}))(re),ce=(a(846),function(e){function t(){return Object(W.a)(this,t),Object(G.a)(this,Object(K.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(q.a)(t,[{key:"renderUnloggedRoute",value:function(e){return r.a.createElement("div",{className:"unlogged-route-wrapper"},e)}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.wallet;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{logged:a}),t)}}]),t}(r.a.Component)),ie=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"project",type:"address"}],name:"projectAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"project",type:"address"}],name:"projectCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"project",type:"address"}],name:"projectFinalized",type:"event"},{constant:!1,inputs:[{internalType:"string",name:"name",type:"string"}],name:"addProject",outputs:[{internalType:"address",name:"addressContract",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"deleteProject",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"finalizeProject",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[{internalType:"address",name:"_project",type:"address"}],name:"getProject",outputs:[{internalType:"string",name:"projectsData",type:"string"},{internalType:"bool",name:"isUserOwner",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getProjects",outputs:[{internalType:"string",name:"projectsData",type:"string"},{internalType:"bool",name:"isUserOwner",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isPMContract",outputs:[{internalType:"bool",name:"isValidPMContract",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"}],oe=[{inputs:[{internalType:"address payable",name:"_owner",type:"address"},{internalType:"string",name:"_name",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"fileHash",type:"string"}],name:"fileAdded",type:"event"},{anonymous:!1,inputs:[],name:"fileDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"participant",type:"address"}],name:"participantAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"participant",type:"address"}],name:"participantRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"participant",type:"address"}],name:"paymentClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"participant",type:"address"}],name:"voteStart",type:"event"},{constant:!1,inputs:[{internalType:"string",name:"_fileHash",type:"string"}],name:"addFile",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"addParticipant",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"cancel",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"cancelParticipantVoting",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"claimPayment",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"currentVoting",outputs:[{internalType:"address",name:"participant",type:"address"},{internalType:"uint256",name:"currentNumber",type:"uint256"},{internalType:"uint256",name:"NumberRequired",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"finalize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getAllParticipants",outputs:[{internalType:"string",name:"participantsAddresses",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getFile",outputs:[{internalType:"string",name:"filesHashes",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"getParticipant",outputs:[{internalType:"address",name:"paticipantAddress",type:"address"},{internalType:"uint256",name:"participantPayment",type:"uint256"},{internalType:"bool",name:"didClaim",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"sender",type:"address"}],name:"getProjectData",outputs:[{internalType:"string",name:"data",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"leaveContract",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"newName",type:"string"}],name:"rename",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"voteForRemoval",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"votingToRemoveParticipant",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],le="0xf118983E6b834c5adba139af33161c2B153e6428",pe=a(50),ue=function(e){var t=e.className,a=e.text;return r.a.createElement("div",{className:"main-loader-wrapper flex-c-h-center".concat("string"===typeof t?" ".concat(t):"")},"string"===typeof a&&""!==a.trim()&&r.a.createElement("p",{className:"main-loading-text"},a),r.a.createElement(pe.a,{wrapperClassName:"main-loader"}))};function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function me(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var fe=r.a.createElement("path",{"data-name":"Trazado 666",d:"M153.066,0C68.668,0,0,68.662,0,153.066S68.668,306.132,153.066,306.132,306.132,237.47,306.132,153.066,237.464,0,153.066,0Zm0,294.358c-77.9,0-141.292-63.387-141.292-141.292S75.161,11.774,153.066,11.774,294.358,75.161,294.358,153.066,230.971,294.358,153.066,294.358Z",fill:"#c13741"}),he=r.a.createElement("path",{"data-name":"Trazado 667",d:"M165.566,83.646h-67.7V18.887a5.887,5.887,0,0,0-11.774,0V83.646h-67.7a5.887,5.887,0,0,0,0,11.774h67.7v70.646a5.887,5.887,0,0,0,11.774,0V95.42h67.7a5.887,5.887,0,1,0,0-11.774Z",transform:"translate(61.09 63.533)",fill:"#c13741"}),be=function(e){var t=e.svgRef,a=e.title,n=me(e,["svgRef","title"]);return r.a.createElement("svg",de({viewBox:"0 0 306.133 306.132",ref:t},n),a?r.a.createElement("title",null,a):null,fe,he)},ye=r.a.forwardRef((function(e,t){return r.a.createElement(be,de({svgRef:t},e))}));a.p,a(847);function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ge=r.a.createElement("g",null,r.a.createElement("path",{d:"m277.332031 128c0 11.78125-9.550781 21.332031-21.332031 21.332031s-21.332031-9.550781-21.332031-21.332031 9.550781-21.332031 21.332031-21.332031 21.332031 9.550781 21.332031 21.332031zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#FFF",fill:"#FFF"}),r.a.createElement("path",{d:"m256 405.332031c-8.832031 0-16-7.167969-16-16v-165.332031h-21.332031c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h37.332031c8.832031 0 16 7.167969 16 16v181.332031c0 8.832031-7.167969 16-16 16zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#FFF",fill:"#FFF"}),r.a.createElement("path",{d:"m256 512c-141.164062 0-256-114.835938-256-256s114.835938-256 256-256 256 114.835938 256 256-114.835938 256-256 256zm0-480c-123.519531 0-224 100.480469-224 224s100.480469 224 224 224 224-100.480469 224-224-100.480469-224-224-224zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#FFF",fill:"#FFF"}),r.a.createElement("path",{d:"m304 405.332031h-96c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h96c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0","data-original":"#000000",className:"active-path","data-old_color":"#FFF",fill:"#FFF"})),Ee=function(e){var t=e.svgRef,a=e.title,n=je(e,["svgRef","title"]);return r.a.createElement("svg",ve({viewBox:"0 0 512 512",className:"",ref:t},n),a?r.a.createElement("title",null,a):null,ge)},Oe=r.a.forwardRef((function(e,t){return r.a.createElement(Ee,ve({svgRef:t},e))}));a.p;function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Ce=r.a.createElement("g",{id:"trash"},r.a.createElement("path",{clipRule:"evenodd",d:"M29.98,6.819c-0.096-1.57-1.387-2.816-2.98-2.816h-3v-1V3.001   c0-1.657-1.344-3-3-3H11c-1.657,0-3,1.343-3,3v0.001v1H5c-1.595,0-2.885,1.246-2.981,2.816H2v1.183v1c0,1.104,0.896,2,2,2l0,0v17   c0,2.209,1.791,4,4,4h16c2.209,0,4-1.791,4-4v-17l0,0c1.104,0,2-0.896,2-2v-1V6.819H29.98z M10,3.002c0-0.553,0.447-1,1-1h10   c0.553,0,1,0.447,1,1v1H10V3.002z M26,28.002c0,1.102-0.898,2-2,2H8c-1.103,0-2-0.898-2-2v-17h20V28.002z M28,8.001v1H4v-1V7.002   c0-0.553,0.447-1,1-1h22c0.553,0,1,0.447,1,1V8.001z",fill:"#fff",fillRule:"evenodd"}),r.a.createElement("path",{clipRule:"evenodd",d:"M9,28.006h2c0.553,0,1-0.447,1-1v-13c0-0.553-0.447-1-1-1H9   c-0.553,0-1,0.447-1,1v13C8,27.559,8.447,28.006,9,28.006z M9,14.005h2v13H9V14.005z",fill:"#fff",fillRule:"evenodd"}),r.a.createElement("path",{clipRule:"evenodd",d:"M15,28.006h2c0.553,0,1-0.447,1-1v-13c0-0.553-0.447-1-1-1h-2   c-0.553,0-1,0.447-1,1v13C14,27.559,14.447,28.006,15,28.006z M15,14.005h2v13h-2V14.005z",fill:"#fff",fillRule:"evenodd"}),r.a.createElement("path",{clipRule:"evenodd",d:"M21,28.006h2c0.553,0,1-0.447,1-1v-13c0-0.553-0.447-1-1-1h-2   c-0.553,0-1,0.447-1,1v13C20,27.559,20.447,28.006,21,28.006z M21,14.005h2v13h-2V14.005z",fill:"#fff",fillRule:"evenodd"})),ke=function(e){var t=e.svgRef,a=e.title,n=Pe(e,["svgRef","title"]);return r.a.createElement("svg",we({enableBackground:"new 0 0 32 32",id:"Layer_1",viewBox:"0 0 32 32",xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,Ce)},Ne=r.a.forwardRef((function(e,t){return r.a.createElement(ke,we({svgRef:t},e))}));a.p;function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function xe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Se=r.a.createElement("path",{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"}),Te=function(e){var t=e.svgRef,a=e.title,n=xe(e,["svgRef","title"]);return r.a.createElement("svg",Ae({viewBox:"0 0 512 512",ref:t},n),a?r.a.createElement("title",null,a):null,Se)},Me=r.a.forwardRef((function(e,t){return r.a.createElement(Te,Ae({svgRef:t},e))}));a.p;function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function De(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _e=r.a.createElement("g",null),Fe=r.a.createElement("g",null),ze=r.a.createElement("g",null),Ie=r.a.createElement("g",null),Le=r.a.createElement("g",null),He=r.a.createElement("g",null),Ve=r.a.createElement("g",null),Ue=r.a.createElement("g",null),Be=r.a.createElement("g",null),Ye=r.a.createElement("g",null),Je=r.a.createElement("g",null),Ze=r.a.createElement("g",null),We=r.a.createElement("g",null),qe=r.a.createElement("g",null),Ge=r.a.createElement("g",null),Ke=function(e){var t=e.svgRef,a=e.title,n=De(e,["svgRef","title"]);return r.a.createElement("svg",Re({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 26 26",style:{enableBackground:"new 0 0 26 26"},xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,r.a.createElement("g",null,r.a.createElement("path",{style:{fill:"#fff"},d:"M20.266,4.207c-0.244-0.24-0.494-0.484-0.74-0.732c-0.248-0.246-0.492-0.496-0.732-0.74 C17.082,0.988,16.063,0,15,0H7C4.795,0,3,1.795,3,4v18c0,2.205,1.795,4,4,4h12c2.205,0,4-1.795,4-4V8 C23,6.938,22.012,5.918,20.266,4.207z M21,22c0,1.104-0.896,2-2,2H7c-1.104,0-2-0.896-2-2V4c0-1.104,0.896-2,2-2l7.289-0.004 C15.01,2.18,15,3.066,15,3.953V7c0,0.551,0.449,1,1,1h3c0.998,0,2,0.005,2,1V22z"})),_e,Fe,ze,Ie,Le,He,Ve,Ue,Be,Ye,Je,Ze,We,qe,Ge)},Xe=r.a.forwardRef((function(e,t){return r.a.createElement(Ke,Re({svgRef:t},e))})),$e=(a.p,a(848),function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(G.a)(this,Object(K.a)(t).call(this))).state={deleting:!1},a.cancelProject=a.cancelProject.bind(Object(X.a)(a)),a.finalizeProject=a.finalizeProject.bind(Object(X.a)(a)),a.handleEvents=a.handleEvents.bind(Object(X.a)(a)),a.projectEventsHandler=new window.web3.eth.Contract(oe,e.address).events.allEvents().on("data",a.handleEvents).on("changed",console.log).on("error",console.log),a}return Object($.a)(t,e),Object(q.a)(t,[{key:"componentWillUnmount",value:function(){this.projectEventsHandler&&this.projectEventsHandler.unsubscribe()}},{key:"handleEvents",value:function(e){console.log("element",e);var t="",a=-1;switch(e.event){case"participantAdded":a=1;case"participantRemoved":this.props.handleParticipantsEvents(e.address.toLowerCase(),e.returnValues.participant.toLowerCase(),a);break;case"fileAdded":t=e.returnValues.fileHash;case"fileDeleted":this.props.handleFileEvents(e.address.toLowerCase(),t);break;case"paymentClaimed":this.props.handlePaymentClaimedEvents(e.address.toLowerCase(),e.returnValues.participant.toLowerCase())}}},{key:"finalizeProject",value:function(){var e=this;if(!this.state.deleting){this.setState({deleting:!0});var t=new window.web3.eth.Contract(ie,le);this.props.finalizeProject(t.methods.finalizeProject(this.props.address).send({from:this.props.account}),this.props.project.address).catch((function(){e.setState({deleting:!1})}))}}},{key:"cancelProject",value:function(){var e=this;if(!this.state.deleting){this.setState({deleting:!0});var t=new window.web3.eth.Contract(ie,le);this.props.cancelProject(t.methods.deleteProject(this.props.address).send({from:this.props.account}),this.props.project.address).catch((function(){e.setState({deleting:!1})}))}}},{key:"renderFileOption",value:function(e){return"string"===typeof e&&""!==e.trim()&&r.a.createElement("a",{href:"https://gateway.ipfs.io/ipfs/".concat(e),className:"project-element-info-button delete-button",target:"_blank",rel:"noreferrer noopener"},r.a.createElement(Xe,null))}},{key:"renderOptions",value:function(){var e=this.props,t=e.project,a=e.isOwner,n=this.state.deleting;return!a||t.isProjectClosed?r.a.createElement("div",{className:"project-element-info-buttons flex-container"},this.renderFileOption(t.fileHash),r.a.createElement(l.b,{className:"project-element-info-button",to:"/project/address/".concat(t.address)},r.a.createElement(Oe,null))):r.a.createElement("div",{className:"project-element-info-buttons flex-container"},t.participants>0?r.a.createElement("button",{className:"project-element-info-button delete-button",onClick:this.finalizeProject},n?r.a.createElement(pe.a,{size:"extra-small"}):r.a.createElement(Me,null)):r.a.createElement("button",{className:"project-element-info-button delete-button",onClick:this.cancelProject},n?r.a.createElement(pe.a,{size:"extra-small"}):r.a.createElement(Ne,null)),this.renderFileOption(t.fileHash),r.a.createElement(l.b,{className:"project-element-info-button",to:"/project/address/".concat(t.address)},r.a.createElement(Oe,null)))}},{key:"render",value:function(){var e=this.props.project;return e?r.a.createElement("div",{className:"project-element-wrapper"},r.a.createElement("div",{className:"project-element"},r.a.createElement("p",{className:"project-element-info project-element-name"},r.a.createElement("span",null,"Project: "),e.name),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Address: "),r.a.createElement("a",{className:"project-element-address",href:"https://ropsten.etherscan.io/address/".concat(e.address),target:"_blank",rel:"noreferrer noopener"},e.address)),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Added: "),r.a.createElement("span",{className:"project-element-date"},C.a.unix(e.createdAt).format("M/D/YYYY h:mm a"))),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Participants: ")," ",e.participants),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Voting in Process: "),r.a.createElement("span",{className:"".concat(e.votingInProcess?"project-info-yes":"project-info-no")},e.votingInProcess?"Yes":"No")),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Closed: "),r.a.createElement("span",{className:"".concat(e.isProjectClosed?"project-info-yes":"project-info-no")},e.isProjectClosed?"Yes":"No")),this.renderOptions())):null}}]),t}(r.a.Component)),Qe=Object(o.b)((function(e,t){return{account:e.metamaskReducer.account,project:e.projectReducer[t.address],isOwner:e.projectReducer.isOwner}}),{cancelProject:_,finalizeProject:F,handleParticipantsEvents:z,handleFileEvents:I,handlePaymentClaimedEvents:L})($e),et=function(e){function t(){var e;return Object(W.a)(this,t),(e=Object(G.a)(this,Object(K.a)(t).call(this))).web3=new te.a(window.web3.currentProvider),e.ProjectManager=new e.web3.eth.Contract(ie,le),e.Project=new e.web3.eth.Contract(oe),e}return Object($.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){(!this.projectsAddresses||this.projectsAddresses&&0===this.projectsAddresses.length)&&this.props.loadProject(this.ProjectManager,this.Project,this.props.account)}},{key:"shouldComponentUpdate",value:function(e){return this.props.account!==e.account?(this.props.loadProject(this.ProjectManager,this.Project,e.account),!1):e.loading!==this.props.loading||(this.props.projectsAddresses,e.projectsAddresses,!0)}},{key:"renderAddButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.a.createElement(l.b,{to:"/project/add",className:"add-project-plus-link".concat(e)},r.a.createElement(ye,{className:"add-project-plus"}))}},{key:"renderContent",value:function(){var e=this.props,t=e.projectsAddresses,a=e.isOwner;return t&&t.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Projects"),a&&this.renderAddButton(" logged-add"),r.a.createElement("div",{className:"flex-container flex-wrap projects-list"},t.map((function(e){return r.a.createElement(Qe,{key:"project-".concat(e),address:e})})))):r.a.createElement("div",{className:"main-loader-wrapper flex-c-h-center"},r.a.createElement("p",{className:"empty-manager-message"},a?"You haven't added any project yet.":"You aren't participanting in any project."),a&&this.renderAddButton())}},{key:"render",value:function(){var e=this.props.loading;return r.a.createElement("main",{className:"home-main".concat(e?" flex-c-h-center":"")},e?r.a.createElement(ue,{text:"loaging projects..."}):this.renderContent())}}]),t}(r.a.Component),tt=Object(o.b)((function(e){return{metamaskExist:e.metamaskReducer.metamaskExist,account:e.metamaskReducer.account,loading:e.projectReducer.loading,isOwner:e.projectReducer.isOwner,projectsAddresses:e.projectReducer.projectsAddresses}}),{loadProject:function(e,t,a){return{type:R.LOAD_PROJECTS,payload:e.methods.getProjects().call({from:a}).then(function(){var e=Object(O.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("[]"!==t.projectsData){e.next=2;break}return e.abrupt("return",{isOwner:t.isUserOwner,projectsAddresses:[]});case 2:return t.projectsData=t.projectsData.replace(/\[,+/,"["),a=x(a=JSON.parse(t.projectsData),"address","projectsAddresses"),e.abrupt("return",M({},a,{isOwner:t.isUserOwner}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}})(et),at=(a(849),function(e){function t(){var e;return Object(W.a)(this,t),(e=Object(G.a)(this,Object(K.a)(t).call(this))).onChange=e.onChange.bind(Object(X.a)(e)),e}return Object($.a)(t,e),Object(q.a)(t,[{key:"onChange",value:function(e){var t=e.target;"function"===typeof this.props.format&&this.props.format(t),"number"===typeof this.props.inputProps.maxLength&&t.value&&(t.value=t.value.substr(0,this.props.inputProps.maxLength)),this.props.onChange(t)}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.inputProps,n=e.selectElements;return r.a.createElement("fieldset",{className:"project-fieldset"},r.a.createElement("label",{className:"project-label",htmlFor:a.id},t),"select"!==a.type?r.a.createElement("input",Object.assign({},a,{onChange:this.onChange,className:"project-input"})):r.a.createElement("select",Object.assign({},a,{className:"project-input",onChange:this.onChange}),n.map((function(e){return r.a.createElement("option",{key:"option-".concat(e),value:e},e)}))))}}]),t}(r.a.Component)),nt=(a(850),function(e){function t(){var e;return Object(W.a)(this,t),(e=Object(G.a)(this,Object(K.a)(t).call(this))).state={loading:!1,success:!1,error:!1},e.onChange=e.onChange.bind(Object(X.a)(e)),e.onSubmit=e.onSubmit.bind(Object(X.a)(e)),e.web3=new te.a(window.web3.currentProvider),e.ProjectManager=new e.web3.eth.Contract(ie,le),e.Project=new e.web3.eth.Contract(oe),e}return Object($.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){this.tx="0xe8739c14ada03476c242b317e9851b5d9df11d7c8cfc4f91055447d810c0d461"}},{key:"onChange",value:function(e){var t=e.value;this.name=t}},{key:"formatName",value:function(e){e.value=e.value.replace(/^\s+$/,"")}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.props.loading||(this.setState({loading:!0,success:null,error:null}),this.ProjectManager.methods.addProject(this.name.trim()).send({from:this.props.account}).then((function(e){console.log(e),t.setState({loading:!1,success:!0})})).catch((function(e){var a=/User denied transaction signature/i.test(e.message)?"signature":"txerror";t.setState({loading:!1,error:a})})))}},{key:"renderMessange",value:function(){var e=this.state,t=e.success,a=e.error;if(t)return r.a.createElement("div",{className:"success-message flex-c-h-center"},r.a.createElement("p",{className:"message-title"},"Project added successfully."),r.a.createElement("p",{className:"message-tx"},"You can see the details in Metamask."));if(a){var n;switch(a){case"signature":n=r.a.createElement("p",null,"Trasaction canceled");break;default:n=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"message-title"},"Failed to add project."),r.a.createElement("p",{className:"message-tx"},"You can see the reason in Metamask."))}return r.a.createElement("div",{className:"error-message flex-c-h-center"},n)}}},{key:"render",value:function(){var e=this.state,t=e.success,a=e.error,n=e.loading;return r.a.createElement("main",{className:"add-project-main flex-1 flex-c-v-center"},r.a.createElement("div",{className:"add-project-content"},r.a.createElement("h2",null,"Add Project"),r.a.createElement("form",{onSubmit:this.onSubmit,className:"add-project-form"},r.a.createElement(at,{label:"Project Name",htmlFor:"name-input",inputProps:{required:!0,id:"name-input",name:"name",maxLength:128,disabled:n},format:this.formatName,onChange:this.onChange}),r.a.createElement("div",{className:"add-project-submit-wrapper flex-r-h-center"},n?r.a.createElement(pe.a,{size:"small"}):r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add"))),(a||t)&&r.a.createElement("div",{className:"flex-r-h-center"},this.renderMessange())))}}]),t}(r.a.Component)),rt=Object(o.b)((function(e){return{account:e.metamaskReducer.account}}))(nt),st=a(621),ct=a.n(st);function it(){return(it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ot(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var lt=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M301.697,491.922H90.785c-11.025,0-21.029-9.649-21.029-20.669V39.39c0-11.02,10.005-19.311,21.029-19.311h210.912 c5.544,0,10.039-4.49,10.039-10.039C311.736,4.49,307.24,0,301.697,0H90.785C68.692,0,49.677,17.292,49.677,39.39v431.863 C49.677,493.35,68.692,512,90.785,512h210.912c5.544,0,10.039-4.49,10.039-10.039S307.24,491.922,301.697,491.922z"}))),pt=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("path",{d:"M459.745,243.586l-90.353-100.392c-3.711-4.127-10.059-4.451-14.176-0.745c-4.123,3.706-4.456,10.4-0.745,14.517 l75.272,83.976H201.304c-5.544,0-10.039,4.49-10.039,10.039c0,5.549,4.495,10.039,10.039,10.039h226.745l-73.216,72.877 c-3.922,3.922-3.922,10.103,0,14.025c1.961,1.961,4.529,2.858,7.098,2.858c2.569,0,5.137-1.022,7.098-2.983l90.353-90.375 C463.157,253.647,463.319,247.556,459.745,243.586z"}))),ut=r.a.createElement("g",null),dt=r.a.createElement("g",null),mt=r.a.createElement("g",null),ft=r.a.createElement("g",null),ht=r.a.createElement("g",null),bt=r.a.createElement("g",null),yt=r.a.createElement("g",null),vt=r.a.createElement("g",null),jt=r.a.createElement("g",null),gt=r.a.createElement("g",null),Et=r.a.createElement("g",null),Ot=r.a.createElement("g",null),wt=r.a.createElement("g",null),Pt=r.a.createElement("g",null),Ct=r.a.createElement("g",null),kt=function(e){var t=e.svgRef,a=e.title,n=ot(e,["svgRef","title"]);return r.a.createElement("svg",it({x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,lt,pt,ut,dt,mt,ft,ht,bt,yt,vt,jt,gt,Et,Ot,wt,Pt,Ct)},Nt=r.a.forwardRef((function(e,t){return r.a.createElement(kt,it({svgRef:t},e))})),At=(a.p,a(1574),a(1575),function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(G.a)(this,Object(K.a)(t).call(this))).state={loading:!1,success:!1,error:!1},a.onChange=a.onChange.bind(Object(X.a)(a)),a.onSubmit=a.onSubmit.bind(Object(X.a)(a)),a.Project=new window.web3.eth.Contract(oe,e.address),a}return Object($.a)(t,e),Object(q.a)(t,[{key:"onChange",value:function(e){var t=e.name,a=e.value;this[t]=a}},{key:"formatAddress",value:function(e){e.value="0x"+e.value.replace(/0x|[^0-9a-f]/gi,"")}},{key:"formatPayment",value:function(e){e.value=e.value.replace(/[^\d]|^0(?=[1-9])/g,"").replace(/^0+$/,"0")}},{key:"getMultiplier",value:function(e){switch(e){case"ether":return 1e18;case"finney":return 1e15;case"gwei":return 1e9;default:return 1}}},{key:"onSubmit",value:function(e){var t=this;(e.preventDefault(),this.props.loading)||(A(this.participant)?new N.a(this.payment).isZero()?this.setState({error:"value"}):(this.setState({loading:!0,success:null,error:null}),this.Project.methods.addParticipant(this.participant).send({from:this.props.account,value:new N.a(this.payment).multipliedBy(this.getMultiplier(this["payment-unit"])).toString()}).then((function(e){t.setState({loading:!1,success:!0},(function(){var e=document.getElementById("add-project-form");e&&e.reset(),delete t.payment,delete t.participant,delete t["payment-unit"]}))})).catch((function(e){var a=/User denied transaction signature/i.test(e.message)?"signature":"txerror";t.setState({loading:!1,error:a})}))):this.setState({error:"address"}))}},{key:"renderMessange",value:function(){var e=this.state,t=e.success,a=e.error;if(t)return r.a.createElement("div",{className:"success-message flex-c-h-center"},r.a.createElement("p",{className:"message-title"},"Participant added successfully."),r.a.createElement("p",{className:"message-tx"},"You can see the details in Metamask."));if(a){var n;switch(a){case"signature":n=r.a.createElement("p",null,"Trasaction canceled");break;case"address":n=r.a.createElement("p",null,"Invalid participant's address");break;case"value":n=r.a.createElement("p",null,"Invalid participant's payment value");break;default:n=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"message-title"},"Failed to add Participant."),r.a.createElement("p",{className:"message-tx"},"You can see the reason in Metamask."))}return r.a.createElement("div",{className:"error-message flex-c-h-center"},n)}}},{key:"render",value:function(){var e=this.state,t=e.success,a=e.error,n=e.loading;return r.a.createElement("div",{className:"project-element"},r.a.createElement("h3",null,"Add Participant"),r.a.createElement("form",{onSubmit:this.onSubmit,id:"add-project-form",className:"add-project-form"},r.a.createElement(at,{label:"Participant Address",htmlFor:"participant-input",inputProps:{required:!0,id:"participant-input",name:"participant",maxLength:42,disabled:n,placeholder:"0x0000000000000000000000000000000000000000"},format:this.formatAddress,onChange:this.onChange}),r.a.createElement("div",{className:"flex-container flex-wrap payment-inputs"},r.a.createElement(at,{label:"Payment Unit",htmlFor:"payment-unit-input",inputProps:{required:!0,id:"payment-unit-input",name:"payment-unit",disabled:n,type:"select",defaultValue:"wei"},selectElements:["ether","finney","gwei","wei"],onChange:this.onChange}),r.a.createElement(at,{label:"Payment",htmlFor:"payment-input",inputProps:{required:!0,id:"payment-input",name:"payment",maxLength:128,disabled:n},format:this.formatPayment,onChange:this.onChange})),r.a.createElement("div",{className:"add-project-submit-wrapper flex-r-h-center"},n?r.a.createElement(pe.a,{size:"small"}):r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add"))),(a||t)&&r.a.createElement("div",{className:"flex-r-h-center"},this.renderMessange()))}}]),t}(r.a.Component)),xt=(a(1576),function(e){function t(){return Object(W.a)(this,t),Object(G.a)(this,Object(K.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(q.a)(t,[{key:"formatPayment",value:function(e){return new N.a(e).isEqualTo(1e18)?"1 ether":"".concat(new N.a(e).dividedBy(1e18)," ethers")}},{key:"render",value:function(){var e=this.props.participant;return r.a.createElement("div",{className:"participant-wrapper"},r.a.createElement("a",{className:"participant-wrapper",key:"participant-".concat(e.address),href:"https://ropsten.etherscan.io/address/".concat(e.address),target:"_blank",rel:"noreferrer noopener"},e.address),r.a.createElement("p",null,r.a.createElement("span",null,"Payment:"),this.formatPayment(e.payment)),r.a.createElement("p",{className:e.didClaim?"claimed":"not-claimed"},e.didClaim?"Claimed":"Not Claimed"))}}]),t}(r.a.Component)),St=Object(o.b)((function(e,t){return{participant:e.projectReducer[t.address]&&e.projectReducer[t.address][t.participantAddress]}}))(xt),Tt=function(e){function t(){var e;return Object(W.a)(this,t),(e=Object(G.a)(this,Object(K.a)(t).call(this))).renderParticipantContent=e.renderParticipantContent.bind(Object(X.a)(e)),e.renderOwnerContent=e.renderOwnerContent.bind(Object(X.a)(e)),e}return Object($.a)(t,e),Object(q.a)(t,[{key:"getMultiplier",value:function(e){switch(e){case"ether":return 1e18;case"finney":return 1e15;case"gwei":return 1e9;default:return 1}}},{key:"renderOwnerContent",value:function(e){var t=this.props.address;return r.a.createElement(St,{key:"participant-".concat(e),participantAddress:e,address:t})}},{key:"renderParticipantContent",value:function(e){if(this.props.account!==e)return r.a.createElement("a",{className:"participant-wrapper",key:"participant-".concat(e),href:"https://ropsten.etherscan.io/address/".concat(e),target:"_blank",rel:"noreferrer noopener"},e)}},{key:"render",value:function(){var e=this.props,t=e.participantsAddresses,a=e.isOwner;return r.a.createElement("div",{className:"project-element"},r.a.createElement("h3",null,"Participants"),t.map(a?this.renderOwnerContent:this.renderParticipantContent))}}]),t}(r.a.Component),Mt=function(e){function t(){var e;return Object(W.a)(this,t),(e=Object(G.a)(this,Object(K.a)(t).call(this))).state={loading:!1},e.claimPayment=e.claimPayment.bind(Object(X.a)(e)),e}return Object($.a)(t,e),Object(q.a)(t,[{key:"claimPayment",value:function(){var e=this,t=this.state.loading,a=this.props,n=a.account,r=a.address;t||(this.setState({loading:!0}),this.props.claimPayment(this.props.project.methods.claimPayment().send({from:n}),r,n).catch(console.log).finally((function(){e.setState({loading:!1})})))}},{key:"formatPayment",value:function(e){return new N.a(e).isEqualTo(1e18)?"1 ether":"".concat(new N.a(e).dividedBy(1e18)," ethers")}},{key:"render",value:function(){var e=this.props,t=e.participant,a=e.isClosed,n=this.state.loading;return r.a.createElement("div",{className:"project-element"},r.a.createElement("h3",null,"My Payment"),r.a.createElement("div",{className:"flex-c-h-center"},r.a.createElement("p",{className:"my-payment-amount"},this.formatPayment(t.payment)),t.didClaim?r.a.createElement("p",{className:"my-payment-claimed"},"Claimed"):n?r.a.createElement(pe.a,{size:"small"}):a?r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.claimPayment},"Claim"):r.a.createElement("p",{className:"my-payment-not-closed-message"},"You have to have to wait for the project to finalize to claim your payment.")))}}]),t}(r.a.Component),Rt=Object(o.b)((function(e,t){return{participant:e.projectReducer[t.address]&&e.projectReducer[t.address][t.account]}}),{claimPayment:function(e,t,a){return{type:R.CLAIM_PAYMENT,payload:e,meta:{address:t,participant:a}}}})(Mt),Dt=a(622);function _t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var zt=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(G.a)(this,Object(K.a)(t).call(this))).state={loadingOption:!1,loading:!1},a.cancelProject=a.cancelProject.bind(Object(X.a)(a)),a.leaveProject=a.leaveProject.bind(Object(X.a)(a)),a.finalizeProject=a.finalizeProject.bind(Object(X.a)(a)),a.loadProjectDetails=a.loadProjectDetails.bind(Object(X.a)(a)),a.handleEvents=a.handleEvents.bind(Object(X.a)(a)),a.isValid=A(e.address),a.project=new window.web3.eth.Contract(oe,e.address),a.isValid&&(a.projectEventsHandler=a.project.events.allEvents().on("data",a.handleEvents).on("changed",console.log).on("error",console.log)),a}return Object($.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){this.props.addParticipants(this.loadProjectDetails(this.props),this.props.address)}},{key:"componentWillUnmount",value:function(){this.projectEventsHandler&&this.projectEventsHandler.unsubscribe(),this.ipfs&&this.ipfs.stop()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.account!==e.account?(this.props.addParticipants(this.loadProjectDetails(e,!0),e.address),!0):this.props.project&&!e.project?(this.props.history.replace("/"),!1):t.loading!==this.state.loading||(t.loadingOption!==this.state.loadingOption||(this.props.projectsAddresses,e.projectsAddresses,!0))}},{key:"loadProjectDetails",value:function(){var e=Object(O.a)(E.a.mark((function e(t,a){var n,r,s,c,i,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),(n=t.project)&&!a){e.next=9;break}return r=new window.web3.eth.Contract(ie,le),e.next=6,t.addProject(r.methods.getProject(t.address).call({from:t.account}),t.address);case 6:(s=e.sent).value||t.history.replace("/"),n=s.value;case 9:if(!n||n.isProjectClosed||this.ipfs){e.next=13;break}return e.next=12,ct.a.create();case 12:this.ipfs=e.sent;case 13:return e.next=15,this.project.methods.getAllParticipants().call({from:t.account});case 15:if(0!==(c=e.sent).length){e.next=19;break}return this.setState({loading:!1}),e.abrupt("return",{participantsAddresses:c});case 19:c=c.split(","),i={},o=0;case 22:if(!(o<c.length)){e.next=29;break}return e.next=25,this.loadParticipantData(this.project,c[o],t.account);case 25:i[c[o]]=e.sent;case 26:o++,e.next=22;break;case 29:return this.setState({loading:!1}),e.abrupt("return",Ft({},i,{participantsAddresses:c}));case 31:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadParticipantData",value:function(){var e=Object(O.a)(E.a.mark((function e(t,a,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.methods.getParticipant(a).call({from:n});case 2:return r=e.sent,e.abrupt("return",{payment:r.participantPayment,address:a,didClaim:r.paymentClaimed});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleEvents",value:function(e){var t="",a=-1;switch(e.event){case"participantAdded":a=1;case"participantRemoved":this.props.handleParticipantsEvents(e.address.toLowerCase(),e.returnValues.participant.toLowerCase(),a,"participantAdded"===e.event?this.loadParticipantData(this.project,e.returnValues.participant.toLowerCase(),this.props.account):null);break;case"fileAdded":t=e.returnValues.fileHash;case"fileDeleted":this.props.handleFileEvents(e.address.toLowerCase(),t);break;case"paymentClaimed":this.props.handlePaymentClaimedEvents(e.address.toLowerCase(),e.returnValues.participant.toLowerCase())}}},{key:"leaveProject",value:function(){var e=this,t=this.props,a=t.address,n=t.account;this.state.loadingOption||(this.setState({loadingOption:!0}),this.props.handleParticipantsEvents(a,n,-1,this.project.methods.leaveContract().send({from:n})).catch((function(){e.setState({loadingOption:!1})})))}},{key:"cancelProject",value:function(){var e=this;if(!this.state.loadingOption){this.setState({loadingOption:!0});var t=new window.web3.eth.Contract(ie,le);this.props.cancelProject(t.methods.deleteProject(this.props.address).send({from:this.props.account}),this.props.project.address).catch((function(){e.setState({loadingOption:!1})}))}}},{key:"finalizeProject",value:function(){var e=this;if(!this.state.loadingOption){this.setState({loadingOption:!0});var t=new window.web3.eth.Contract(ie,le);this.props.finalizeProject(t.methods.finalizeProject(this.props.address).send({from:this.props.account}),this.props.project.address).catch((function(){e.setState({loadingOption:!1})}))}}},{key:"renderFileOption",value:function(e){return"string"===typeof e&&""!==e.trim()&&r.a.createElement("a",{href:"https://gateway.ipfs.io/ipfs/".concat(e),className:"project-view-button",target:"_blank",rel:"noreferrer noopener"},r.a.createElement("div",{className:"project-view-button-icon delete-button"},r.a.createElement(Xe,null)),"See File")}},{key:"renderOptions",value:function(){var e=this.props,t=e.project,a=e.isOwner,n=this.state.loadingOption;return!a||t.isProjectClosed?r.a.createElement("div",{className:"project-view-buttons flex-r-h-center flex-wrap"},this.renderFileOption(t.fileHash),!a&&!t.isProjectClosed&&r.a.createElement("button",{className:"project-view-button",onClick:this.leaveProject},r.a.createElement("div",{className:"project-view-button-icon"},n?r.a.createElement(pe.a,{size:"extra-small"}):r.a.createElement(Nt,null)),"Leave")):r.a.createElement("div",{className:"project-view-buttons flex-r-h-center flex-wrap"},t.participants>0?r.a.createElement("button",{className:"project-view-button",onClick:this.finalizeProject},r.a.createElement("div",{className:"project-view-button-icon"},n?r.a.createElement(pe.a,{size:"extra-small"}):r.a.createElement(Me,null)),"Finalize"):r.a.createElement("button",{className:"project-view-button",onClick:this.cancelProject},r.a.createElement("div",{className:"project-view-button-icon delete-button"},n?r.a.createElement(pe.a,{size:"extra-small"}):r.a.createElement(Ne,null)),"Delete"),this.renderFileOption(t.fileHash))}},{key:"renderParticipantsList",value:function(e){var t=this.props,a=t.isOwner,n=t.account,s=t.address;if(a||e.length>1)return r.a.createElement(Tt,{isOwner:a,account:n,address:s,participantsAddresses:e})}},{key:"render",value:function(){var e=this.props,t=e.project,a=e.isOwner,n=e.address,s=e.account,c=this.state.loading;return this.isValid?c?r.a.createElement("main",{className:"flex-c-h-center"},r.a.createElement(pe.a,null)):t?r.a.createElement("main",{className:"project-main"},r.a.createElement("h2",null,t.name),this.renderOptions(),r.a.createElement("div",{className:"project-element"},r.a.createElement("h3",null,"Details"),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Address: "),r.a.createElement("a",{className:"project-element-address",href:"https://ropsten.etherscan.io/address/".concat(t.address),target:"_blank",rel:"noreferrer noopener"},t.address)),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Added: "),r.a.createElement("span",{className:"project-element-date"},C.a.unix(t.createdAt).format("M/D/YYYY h:mm a"))),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Participants: ")," ",t.participants),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Voting in Process: "),r.a.createElement("span",{className:"".concat(t.votingInProcess?"project-info-yes":"project-info-no")},t.votingInProcess?"Yes":"No")),r.a.createElement("p",{className:"project-element-info"},r.a.createElement("span",null,"Closed: "),r.a.createElement("span",{className:"".concat(t.isProjectClosed?"project-info-yes":"project-info-no")},t.isProjectClosed?"Yes":"No"))),a&&!t.isProjectClosed&&r.a.createElement(Dt.a,{fileHash:t.fileHash,account:s,address:n,ipfs:this.ipfs,project:this.project}),!a&&t.participantsAddresses&&r.a.createElement(Rt,{address:n,account:s,isClosed:t.isProjectClosed,project:this.project}),a&&!t.isProjectClosed&&r.a.createElement(At,{address:n,account:s}),t.participantsAddresses&&this.renderParticipantsList(t.participantsAddresses)):null:r.a.createElement(Q.a,{to:"/"})}}]),t}(r.a.Component),It=Object(Q.g)(Object(o.b)((function(e,t){return{account:e.metamaskReducer.account,project:e.projectReducer[t.match.params.address],address:t.match.params.address,isOwner:e.projectReducer.isOwner}}),{cancelProject:_,finalizeProject:F,handleParticipantsEvents:z,handleFileEvents:I,addProject:D,addParticipants:function(e,t){return{type:R.ADD_PARTICIPANTS,payload:e,meta:{address:t}}},handlePaymentClaimedEvents:L})(zt)),Lt={exact:!0,path:"/project/add",component:rt,key:"AddProjectViewContainer"},Ht=[{exact:!0,path:"/",component:tt,key:"HomeViewContainer"},{exact:!0,path:"/project/address/:address",component:It,key:"ProjectViewContainer"}],Vt=a(623),Ut=a.n(Vt),Bt=(a(1577),function(e){function t(){return Object(W.a)(this,t),Object(G.a)(this,Object(K.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(q.a)(t,[{key:"renderContent",value:function(e){return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Metamask access denied"),r.a.createElement("p",null,"Please reload the page and grant access to your account to continue.")):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"metamask-link",href:"https://metamask.io/",target:"_blank",rel:"noreferrer noopener"},r.a.createElement("div",{className:"metamask-icon-wrapper"},r.a.createElement("img",{alt:"metamask-icon",src:Ut.a,className:"metamask-icon"})),"Metamask.io"))}},{key:"render",value:function(){var e=this.props.metamaskExist;return r.a.createElement("main",{className:"mm-not-found-main"},r.a.createElement("div",{className:"mm-not-found-content"},this.renderContent(e)))}}]),t}(r.a.Component)),Yt=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(G.a)(this,Object(K.a)(t).call(this,e))).setAccount=a.setAccount.bind(Object(X.a)(a)),a.addProject=a.addProject.bind(Object(X.a)(a)),a.initializeMetamask=a.initializeMetamask.bind(Object(X.a)(a)),a}return Object($.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){this.initializeMetamask()}},{key:"shouldComponentUpdate",value:function(e){var t=e.metamaskExist,a=e.isOwner,n=this.props,r=n.metamaskExist,s=n.isOwner;if(r!==t){if("enable"!==r&&"enabled"===t){var c=new window.web3.eth.Contract(ie,le);this.projectAddedListener=c.events.allEvents().on("data",this.addProject).on("changed",console.log).on("error",console.log)}return"enable"===r&&"enabled"!==t&&this.projectAddedListener.unsubscribe(),!0}return a!==s}},{key:"addProject",value:function(e){switch(console.log(e),e.event){case"projectAdded":var t=new window.web3.eth.Contract(ie,le);this.props.addProject(t.methods.getProject(e.returnValues.project).call({from:this.props.account}),e.returnValues.project).catch(console.log);break;case"projectFinalized":case"projectCancelled":this.props["".concat("projectFinalized"===e.event?"finalize":"cancel","ProjectEvent")](e.returnValues.project.toLowerCase())}}},{key:"setAccount",value:function(e){this.props.changeAccount(e[0],"enabled")}},{key:"initializeMetamask",value:function(){var e=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof window.ethereum||"undefined"!==typeof window.web3){e.next=2;break}return e.abrupt("return",this.props.setMetamask(!1));case 2:if(!window.ethereum){e.next=17;break}return window.web3=new te.a(window.ethereum),e.prev=4,e.next=7,window.ethereum.enable();case 7:t=e.sent,window.ethereum.on("accountsChanged",this.setAccount),this.props.changeAccount(t[0],"enabled"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.props.setMetamask("denied");case 15:e.next=19;break;case 17:window.web3=new te.a(window.web3.currentProvider),this.props.changeAccount(window.web3.eth.accounts[0],"enabled");case 19:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render404",value:function(){return"404"}},{key:"renderContent",value:function(e,t){switch(e){case"loading":return r.a.createElement("main",{className:"flex-container flex-1"},r.a.createElement(ue,{text:"Loading account from metamask...",className:"metamask-loading"}));case"enabled":return r.a.createElement(Q.d,null,Ht.map((function(e){return r.a.createElement(Q.b,e)})),t&&r.a.createElement(Q.b,Lt),r.a.createElement(Q.b,{render:function(){return r.a.createElement(Q.a,{to:"/"})}}));default:return r.a.createElement(Bt,{metamaskExist:e})}}},{key:"render",value:function(){var e=this.props,t=e.metamaskExist,a=e.isOwner;return r.a.createElement(ce,{wallet:this.props.wallet},this.renderContent(t,a))}}]),t}(n.Component),Jt=Object(o.b)((function(e){return{metamaskExist:e.metamaskReducer.metamaskExist,account:e.metamaskReducer.account,isOwner:e.projectReducer.isOwner}}),{changeAccount:function(e,t){return{type:h.CHANGE_ACCOUNT,account:e,metamask:t}},setMetamask:function(e){return{type:h.SET_METAMASK,metamask:e}},addProject:D,finalizeProjectEvent:function(e){return{type:R.FINALIZE_PROJECT,address:e}},cancelProjectEvent:function(e){return{type:R.DELETE_PROJECT,address:e}}})(Yt);function Zt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var qt=function(){var e=[p.a,f()(),Object(d.a)({promiseTypeSuffixes:["START","SUCCESS","ERROR"]})];return Object(u.d)(Object(u.c)({metamaskReducer:v,projectReducer:Y}),{},Z&&Z(u.a.apply(void 0,e))||u.a.apply(void 0,e))}(),Gt=qt.dispatch,Kt=(qt.getState,function(){return N.a.set({EXPONENTIAL_AT:[-20,20],FORMAT:Wt({},N.a.FORMAT,{decimalSeparator:".",groupSeparator:""})}),r.a.createElement(o.a,{store:qt},r.a.createElement(l.a,{basename:"/ipns/QmfDBNuB4gnKcLdkT4ttFYoRGTZmv2SXMmdwYg1BKPGeZN"},r.a.createElement(Jt,{dispatch:Gt})))}),Xt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $t(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this;if(e){var a=function(){return t},n=function(){return Promise.resolve(e()).then(a)};return this.then(n,n)}return this}),c.a.render(r.a.createElement(Kt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Xt?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$t(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):$t(t,e)}))}}()},271:function(e,t){},295:function(e,t){},50:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=function(e){var t=e.className,a=void 0===t?"lds-spinner":t,n=e.wrapperProps,s=void 0===n?{}:n,c=e.wrapperClassName,i=e.size;return r.a.createElement("div",Object.assign({className:"lds-spinner-wrapper ".concat(c)},i&&{"spinner-size":i}||{},s),r.a.createElement("div",{className:a},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))};s.defaultProps={wrapperClassName:""},t.a=s},622:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),s=a(32),c=a(24),i=a(30),o=a(27),l=a(23),p=a(20),u=a(26),d=a(0),m=a.n(d),f=a(50),h=function(t){function a(){var e;return Object(c.a)(this,a),(e=Object(o.a)(this,Object(l.a)(a).call(this))).state={loading:!1,success:!1,error:!1},e.uploadDocument=e.uploadDocument.bind(Object(p.a)(e)),e.onChange=e.onChange.bind(Object(p.a)(e)),e.onSubmit=e.onSubmit.bind(Object(p.a)(e)),e.deleteFile=e.deleteFile.bind(Object(p.a)(e)),e}return Object(u.a)(a,t),Object(i.a)(a,[{key:"onChange",value:function(e){var t=e.target;this.input=t,this.setState({file:t.files[0]})}},{key:"uploadDocument",value:function(){var t=this,a=this.props,n=a.ipfs,c=a.account,i=a.project,o=new FileReader;o.onload=Object(s.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.add(e.from(o.result)).then(function(){var e=Object(s.a)(r.a.mark((function e(a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.methods.addFile(a[0].path).send({from:c});case 3:t.setState({file:"",success:!0,loading:!1}),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),n=/User denied transaction signature/i.test(e.t0.message)?"signature":"txerror",t.setState({file:"",success:!1,error:n,loading:!1});case 11:t.input.value="";case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)}))),o.readAsArrayBuffer(this.state.file)}},{key:"deleteFile",value:function(){var e=this,t=this.props,a=t.account,n=t.project;this.setState({loading:!0,success:null,error:null}),n.methods.addFile("").send({from:a}).then((function(){return e.setState({success:"delete",loading:!1})})).catch((function(t){console.log(t);var a=/User denied transaction signature/i.test(t.message)?"signature":"delete";e.setState({success:!1,error:a,loading:!1})}))}},{key:"onSubmit",value:function(e){e.preventDefault(),!this.props.loading&&this.state.file&&(this.setState({loading:!0,success:null,error:null}),this.uploadDocument())}},{key:"renderMessange",value:function(){var e=this.state,t=e.success,a=e.error;if(t)return m.a.createElement("div",{className:"success-message flex-c-h-center"},m.a.createElement("p",{className:"message-title"},"File ","delete"!==t?"added":"deleted"," successfully."),m.a.createElement("p",{className:"message-tx"},"You can see the details in Metamask."));if(a){var n;switch(a){case"signature":n=m.a.createElement("p",null,"Trasaction canceled");break;default:n=m.a.createElement(m.a.Fragment,null,m.a.createElement("p",{className:"message-title"},"Failed to ","delete"!==a?"add":"delete"," file."),m.a.createElement("p",{className:"message-tx"},"You can see the reason in Metamask."))}return m.a.createElement("div",{className:"error-message flex-c-h-center"},n)}}},{key:"render",value:function(){var e=this.state,t=e.success,a=e.error,n=e.loading,r=e.file,s=this.props.fileHash;return m.a.createElement("div",{className:"project-element"},m.a.createElement("h3",null,""===s?"Add":"Replace"," File"),m.a.createElement("form",{onSubmit:this.onSubmit,className:"add-project-form"},m.a.createElement("fieldset",null,m.a.createElement("label",{className:"ipfs-label",htmlFor:"ipfs-file"},r?"File selected":"Select File"),m.a.createElement("input",{name:"file",type:"file",id:"ipfs-file",hidden:!0,required:!0,onChange:this.onChange})),m.a.createElement("div",{className:"add-project-submit-wrapper flex-r-h-center"},n?m.a.createElement(f.a,{size:"small"}):""===s?m.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add"):m.a.createElement(m.a.Fragment,null,m.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.deleteFile},"Delete"),m.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Replace")))),(a||t)&&m.a.createElement("div",{className:"flex-r-h-center"},this.renderMessange()))}}]),a}(m.a.Component);t.a=h}).call(this,a(2).Buffer)},623:function(e,t,a){e.exports=a.p+"static/media/metamask.2e91abe3.png"},624:function(e,t,a){e.exports=a(1578)},629:function(e,t,a){},645:function(e,t){},666:function(e,t){},668:function(e,t){},706:function(e,t){},708:function(e,t){},737:function(e,t){},843:function(e,t,a){},845:function(e,t,a){},846:function(e,t,a){},847:function(e,t,a){},848:function(e,t,a){},849:function(e,t,a){},850:function(e,t,a){},952:function(e,t){}},[[624,1,2]]]);